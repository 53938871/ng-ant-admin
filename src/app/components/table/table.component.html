<nz-table #nzTable
          [nzAjaxData]="tableData"
          [nzTotal]="total "
          [nzLoading]="loading"
          [(nzPageIndex)]="pageIndex"
          (nzPageIndexChange)="_refreshData()"
          [nzPageSize]="pageSize "
          (nzPageSizeChange)="_refreshData()">
  <thead nz-thead>
  <tr>
    <th nz-th [nzCheckbox]="true">
      <label nz-checkbox [(ngModel)]="_allChecked" [nzIndeterminate]="_indeterminate"
             (ngModelChange)="_checkAll($event)">
      </label>
    </th>
    <th nz-th *ngFor="let fieldObj of gridView.tableFields"><span>{{fieldObj.text}}</span></th>
  </tr>
  </thead>
  <tbody nz-tbody>
  <tr nz-tbody-tr *ngFor="let data of nzTable.data">
    <td nz-td [nzCheckbox]="true">
      <label nz-checkbox [(ngModel)]="data.checked" (ngModelChange)="_refreshStatus($event)">
      </label>
    </td>
    <ng-template ngFor let-fieldObj [ngForOf]="gridView.tableFields" let-i="index">
      <td nz-td *ngIf="!fieldObj.type||fieldObj.type===1">
        {{data[fieldObj.field]}}
      </td>
      <td nz-td *ngIf="fieldObj.type||fieldObj.type===2">
       <span>
         <ng-template ngFor let-handle [ngForOf]="fieldObj.handles" let-i="index">
              <a href="javascript:;" *ngIf="!handle.confirm;else elseBlock"
                 (click)="handle.event(data[handle.key]||data.id)">{{handle.text}}</a>
               <ng-template #elseBlock>
                <nz-popconfirm [nzTitle]="handle.confirm.title"
                               (nzOnConfirm)="handle.confirm.event.ok(data[handle.key])"
                               (nzOnCancel)="handle.confirm.event.cancel()">
                  <a href="javascript:;" nz-popconfirm>{{handle.text}}</a>
               </nz-popconfirm>
               </ng-template>
              <span nz-table-divider *ngIf="i%2===0&&i!==fieldObj.handles.length"></span>
         </ng-template>
            </span>
      </td>
    </ng-template>
  </tr>
  </tbody>
</nz-table>
